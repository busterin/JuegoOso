/* Base */
* { box-sizing: border-box; }
:root { --dayCycle: 60s; --scale: 1; }
body { font-family: Arial, sans-serif; background: #f0f0f0; margin: 0; }

/* Overlays */
.overlay {
  position: fixed; inset: 0; display:none;
  align-items:center; justify-content:center;
  background: rgba(0,0,0,.6); z-index: 2000;
}
.overlay.visible { display:flex; }
.overlay-box {
  background:#fff; border:2px solid #333; border-radius:14px;
  padding:24px 28px; max-width: 500px; width:90%; text-align: center;
}
.overlay-actions { display:flex; gap:14px; justify-content:center; margin-top:16px; }
.btn {
  display:inline-block; padding:12px 20px; border-radius:10px; border:2px solid #333;
  background:#fff; cursor:pointer; font-weight:700;
  box-shadow:0 4px 0 #333; transition:transform .06s ease, box-shadow .2s ease;
}
.btn.primary { background:#2ecc71; border-color:#2ecc71; color:#fff; box-shadow:0 4px 0 #239d57; }

/* Contenedor responsive del juego (wrapper) */
.game { width: 100vw; max-width: 1100px; margin: 10px auto; }

/* Escenario base (600×200) que se escala */
.stage {
  position: relative; width: 600px; height: 200px; margin: 0 auto;
  background:#fff url("img/FondoTile.PNG") repeat-x bottom/auto 100%;
  border: 2px solid #333; overflow: hidden;
  transform: scale(var(--scale)); transform-origin: top center;
}

/* Cielo día-noche */
.sky-tint {
  position: absolute; inset: 0; z-index: 0; pointer-events: none;
  mix-blend-mode: multiply; opacity: 0.9;
  animation: skyCycle var(--dayCycle) linear infinite;
}
@keyframes skyCycle {
  0%{background:transparent;} 25%{background:rgba(255,200,120,0.18);}
  50%{background:rgba(30,60,120,0.38);} 75%{background:rgba(255,120,160,0.22);}
  100%{background:transparent;}
}

/* Oso (Oso.png) con volteo a la izquierda */
#player {
  position: absolute; bottom: 0; left: 50px;
  width: 80px; height: 80px;
  background:url("img/Oso.png") center bottom/contain no-repeat;
  transform-origin: bottom center; z-index: 2;
  transition: transform 0.1s linear;
}
#player.flip { transform: scaleX(-1); }

/* Espada */
#sword { position:absolute; bottom:18px; left:-9999px;
  width:70px; height:70px; background:url("img/Espada.png") center/contain no-repeat;
  opacity:0; z-index:4; transform-origin:10% 80%;
}
#sword.swing-right {animation:swingRight 220ms ease-out forwards; opacity:1;}
#sword.swing-left  {animation:swingLeft  220ms ease-out forwards; opacity:1;}
@keyframes swingRight{0%{transform:rotate(40deg);}100%{transform:rotate(-35deg);}}
@keyframes swingLeft {0%{transform:scaleX(-1) rotate(40deg);}100%{transform:scaleX(-1) rotate(-35deg);}}

/* Destello */
#spark {position:absolute;width:34px;height:34px;left:-9999px;bottom:0;border-radius:50%;
  background:radial-gradient(circle,rgba(255,255,120,0.95)0%,rgba(255,170,0,0.9)50%,rgba(255,140,0,0)70%);
  z-index:5;opacity:0;}
#spark.burst{animation:sparkPop 260ms ease-out forwards;}
@keyframes sparkPop{0%{transform:scale(.6);opacity:0;}30%{transform:scale(1.2);opacity:1;}100%{transform:scale(1.6);opacity:0;}}

/* Roca */
#obstacle {position:absolute;bottom:0;right:-50px;width:50px;height:50px;
  background:url("img/Roca.png") bottom center/contain no-repeat; z-index:1;}
@keyframes moveObstacle {from{right:-50px;} to{right:100%;}}
#obstacle.disintegrate{animation:rockVanish .28s ease forwards;}
@keyframes rockVanish{0%{opacity:1;}70%{opacity:.35;}100%{opacity:0;transform:translateY(-6px);}}

/* Cueva */
#cave {position:absolute;bottom:0;right:0;width:100px;height:100px;
  background:url("img/Cueva.png") bottom center/contain no-repeat; display:none;}

/* Salto */
.jump{animation:jump .55s ease;}
@keyframes jump{0%{bottom:0;}50%{bottom:120px;}100%{bottom:0;}}

/* Controles móviles: barra flotante fija (solo <=1200px) */
.controls{
  position: fixed; left:50%; transform: translateX(-50%);
  bottom: 10px; display:flex; gap:12px; justify-content:center; align-items:center;
  padding:10px 12px; background: rgba(255,255,255,0.9);
  border: 2px solid #333; border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15); z-index: 1500; backdrop-filter: blur(4px);
  max-width: calc(100vw - 20px);
}
.ctrl{width:min(22vw,120px); max-width:140px; height:56px; border:2px solid #333; border-radius:10px;
  background:#fff; font-size:22px; font-weight:700; touch-action: manipulation;}
@media (min-width: 1200px){.controls{display:none;}}